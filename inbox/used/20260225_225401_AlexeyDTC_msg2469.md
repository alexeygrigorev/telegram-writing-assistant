---
source: telegram
date: 2026-02-25T22:54:01+00:00
user_id: 822266080
username: AlexeyDTC
---

вот я попросил сделать саммари 

# Summary

Reproduced `rocket-upscale.png` as an SVG across 16 iterations, reaching **MSE ~97** (1.4% mean pixel error).

## What we did

1. Started with a user-provided **potrace-based** PNG-to-SVG script. `pypotrace` failed to install (missing `libagg`), so we swapped in **OpenCV contour tracing** (`cv2.findContours` + `cv2.approxPolyDP`) — same preprocessing, different tracing backend.

2. **Traced** the image into 9 contours and **identified** each one by rendering them individually: rounded rectangle, rocket body, window cutout, 3 exhaust trails, 2 particle dots, 1 window dot.

3. **Assembled** the SVG layer by layer (iter_001–006), assigning colors to each contour based on its role in the hierarchy (yellow background, black shapes, yellow cutouts).

4. **Smoothed** the polygon paths using Catmull-Rom splines (iter_007–009). Found that smoothing all shapes distorted the rectangle, so applied it selectively to organic shapes only.

5. **Precision-tuned** colors by sampling exact pixel values from the original (iter_012), added a subtle background glow via SVG filter (iter_013–016), and used pixel-level MSE + diff heatmaps to guide each refinement.

## What worked

- OpenCV contours as a drop-in replacement for potrace
- Ultra-fine polygon approximation (epsilon_frac=0.0003) for shape accuracy
- SVG `<circle>` elements (via `cv2.minEnclosingCircle`) for perfectly round dots
- Median of multiple pixel samples for robust color extraction

## What didn't work

- `pypotrace` — wouldn't build without `libagg`
- Smoothing all shapes uniformly — distorted the rectangle's straight edges
- Catmull-Rom bezier smoothing in general — looks nicer visually but increased MSE from 97 to 130
- SVG glow filter — barely moved MSE (98.0 → 97.8); the original's glow is too subtle to replicate well

## Bottom line

The remaining 1.4% error is almost entirely **edge anti-aliasing** — an inherent difference between how cairosvg rasterizes SVG paths versus how the original image was rendered. The shapes, colors, and layout match.